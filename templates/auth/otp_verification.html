{% load static %}
<!doctype html>
<html lang="en" dir="ltr">
  <head>

		<!-- META DATA -->
		<meta charset="UTF-8">
		<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="Zanex – Bootstrap  Admin & Dashboard Template">
		<meta name="author" content="Spruko Technologies Private Limited">
		<meta name="keywords" content="admin, dashboard, dashboard ui, admin dashboard template, admin panel dashboard, admin panel html, admin panel html template, admin panel template, admin ui templates, administrative templates, best admin dashboard, best admin templates, bootstrap 4 admin template, bootstrap admin dashboard, bootstrap admin panel, html css admin templates, html5 admin template, premium bootstrap templates, responsive admin template, template admin bootstrap 4, themeforest html">

		<!-- FAVICON -->
		<link rel="shortcut icon" type="image/x-icon" href="{% static 'images/brand/favicon.ico'%}" />

		<!-- TITLE -->
		<title>Zanex – Bootstrap  Admin & Dashboard Template</title>

		<!-- BOOTSTRAP CSS -->
		<link href="{% static 'plugins/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet" />

		<!-- STYLE CSS -->
		<link href="{% static 'css/style.css'%}" rel="stylesheet"/>
		<link href="{% static 'css/dark-style.css'%}" rel="stylesheet"/>
		<link href="{% static 'css/skin-modes.css'%}" rel="stylesheet" />

		<!-- SIDE-MENU CSS -->
		<link href="{% static 'css/sidemenu.css'%}" rel="stylesheet" id="sidemenu-theme">

		<!-- SINGLE-PAGE CSS -->
		<link href="{% static 'plugins/single-page/css/main.css'%}" rel="stylesheet" type="text/css">

		<!--C3 CHARTS CSS -->
		<link href="{% static 'plugins/charts-c3/c3-chart.css'%}" rel="stylesheet"/>

		<!-- P-scroll bar css-->
		<link href="{% static 'plugins/p-scroll/perfect-scrollbar.css'%}" rel="stylesheet" />

		<!--- FONT-ICONS CSS -->
		<link href="{% static 'css/icons.css'%}" rel="stylesheet"/>

		<!-- COLOR SKIN CSS -->
		<link id="theme" rel="stylesheet" type="text/css" media="all" href="{% static 'colors/color1.css'%}" />

        <script>
			let countdown = 600; // 10 menit
			let resendCountdown = 10; // 10 detik untuk aktifkan tombol resend
		
			function startCountdown() {
				const timer = document.getElementById("timer");
				const resendBtn = document.getElementById("resendBtn");
		
				// Mulai timer utama 10 menit
				const interval = setInterval(() => {
					const minutes = Math.floor(countdown / 60);
					const seconds = countdown % 60;
					timer.innerText = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
					countdown--;
		
					if (countdown < 0) {
						clearInterval(interval);
						timer.innerText = "Expired";
					}
				}, 1000);
		
				// Mulai timer tombol resend (10 detik)
				resendBtn.disabled = true;
				resendBtn.innerText = `Kirim OTP Ulang (${resendCountdown})`;
		
				const resendInterval = setInterval(() => {
					resendCountdown--;
					resendBtn.innerText = `Kirim OTP Ulang (${resendCountdown})`;
		
					if (resendCountdown <= 0) {
						clearInterval(resendInterval);
						resendBtn.disabled = false;
						resendBtn.innerText = "Kirim OTP Ulang";
					}
				}, 1000);
			}
		
			window.onload = startCountdown;
		</script>
		

	</head>

	<body>

		<!-- BACKGROUND-IMAGE -->
		<div class="login-img">

			<!-- GLOABAL LOADER -->
			<div id="global-loader">
				<img src="{% static 'images/loader.svg'%}" class="loader-img" alt="Loader">
			</div>
			<!-- /GLOABAL LOADER -->

			<!-- PAGE -->
			<div class="page">
				<div class="">
				    <!-- CONTAINER OPEN -->
					<div class="col col-login mx-auto">
						<div class="text-center">
							<img src="{% static 'images/brand/logo.png'%}" class="header-brand-img" alt="">
						</div>
					</div>
					<div class="container-login100">
						<div class="wrap-login100 p-0">
							<div class="card-body">
                                <h2>Verifikasi OTP</h2>
    <p>Kode OTP telah dikirim ke email Anda. Berlaku selama <span id="timer">10:00</span></p>
                                    <form class="login100-form validate-form" method="post">
                                        {% csrf_token %}
                                        <input type="text" name="otp" placeholder="Masukkan OTP" required>
                                        <button type="submit">Verifikasi</button>
                                    </form>
                                
                                    <form method="post" action="{% url 'app:resend_otp' %}" id="resendForm">
										{% csrf_token %}
										<input type="hidden" name="email" value="{{ request.session.pending_user_email }}">
										<button type="submit" id="resendBtn" disabled>Kirim OTP Ulang (10)</button>
									</form>
                                    {% if messages %}
										<ul>
											{% for message in messages %}
												<li>{{ message }}</li>
											{% endfor %}
										</ul>
									{% endif %}
							</div>
						</div>
					</div>
					<!-- CONTAINER CLOSED -->
				</div>
			</div>
			<!-- End PAGE -->

		</div>
		<!-- BACKGROUND-IMAGE CLOSED -->

		<!-- JQUERY JS -->
		<script src="{% static 'js/jquery.min.js'%}"></script>

		<!-- BOOTSTRAP JS -->
		<script src="{% static 'plugins/bootstrap/js/popper.min.js'%}"></script>
		<script src="{% static 'plugins/bootstrap/js/bootstrap.min.js'%}"></script>

		<!-- SPARKLINE JS -->
		<script src="{% static 'js/jquery.sparkline.min.js'%}"></script>

		<!-- CHART-CIRCLE JS -->
		<script src="{% static 'js/circle-progress.min.js'%}"></script>

		<!-- Perfect SCROLLBAR JS-->
		<script src="{% static 'plugins/p-scroll/perfect-scrollbar.js'%}"></script>

		<!-- INPUT MASK JS -->
		<script src="{% static 'plugins/input-mask/jquery.mask.min.js'%}"></script>

		<!-- CUSTOM JS-->
		<script src="{% static 'js/custom.js'%}"></script>

	</body>
</html>
